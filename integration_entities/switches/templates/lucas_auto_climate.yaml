---
platform: template
switches:
  lucas_auto_climate:
    unique_id: switch.lucas_auto_climate
    friendly_name: Lucas Automatic Climate Mode
    icon_template: mdi:autorenew
    turn_on:
      - choose:
          - conditions: '{{ is_state("sensor.lucas_recommended_mode","auto") }}'
            sequence:
              - service: climate.set_temperature
                target:
                  entity_id: climate.lucas_room
                data:
                  mode: auto
                  temperature: 65

        default:
          - service: climate.set_hvac_mode
            target:
              entity_id: climate.lucas_room
            data:
              mode: '{{ states("sensor.lucas_recommended_mode") }}'

    turn_off:
      - service: climate.set_hvac_mode
        target:
          entity_id: climate.lucas_room
        data:
          mode: "off"
