---
unique_id: unknown_count
name: Unknown count
icon: mdi:help-rhombus
state_class: total
state: |
  {%- set ignore_list = [
      "sensor.unknown_count", "sensor.octoprint_current_state",
      "sensor.octoprint_time_elapsed", "sensor.octoprint_time_remaining",
      "sensor.octoprint_estimated_finish_time", "sensor.octoprint_start_time",
      "sensor.rainforest_energy_monitoring_unit",
      "sensor.last_message", "sensor.last_speaker",
      "button.entry_railing_restart",
      "number.bedroom_dimmer", "sensor.accuweather_ozone_0d", "sensor.lastboot"
  ] %}
  {{ states | selectattr("state","eq","unknown") | rejectattr('entity_id','in',ignore_list) | map(attribute="entity_id") | list | count }}
attributes:
  entities: |
    {%- set ignore_list = [
      "sensor.unknown_count", "sensor.octoprint_current_state",
      "sensor.octoprint_time_elapsed", "sensor.octoprint_time_remaining",
      "sensor.octoprint_estimated_finish_time", "sensor.octoprint_start_time",
      "sensor.rainforest_energy_monitoring_unit",
      "sensor.last_message", "sensor.last_speaker",
      "button.entry_railing_restart",
      "number.bedroom_dimmer", "sensor.accuweather_ozone_0d", "sensor.lastboot"
    ] %}
    {{ states | selectattr("state","eq","unknown") | rejectattr('entity_id','in',ignore_list) | map(attribute="entity_id") | list | replace("[","") | replace("]","") | replace("'","") }}
