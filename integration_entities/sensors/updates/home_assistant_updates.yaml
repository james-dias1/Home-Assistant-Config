---
platform: template
sensors:
  home_assistant_updates:
    entity_id:
      - sensor.core_supervisor_updates # Core + Supervisor
      - sensor.hacs                    # Home Assistant Community Store
      - sensor.addon_updates
    icon_template: mdi:counter
    value_template: >
      {% set updates = 0 %}
      {% set updates = updates + states("sensor.core_supervisor_updates")|int|default("0") %}      
      {% set updates = updates + states("sensor.hacs")|int|default("0") %}
      {% set updates = updates + states("sensor.addon_updates")|int|default("0") %}
      {{ updates }}

    attribute_templates:
      core: '{{ is_state("binary_sensor.update_available","on") }}'
      supervisor: '{{ state_attr("sensor.supervisor","version") != state_attr("sensor.supervisor","version_latest") }}'
      hacs: '{{ states("sensor.hacs")|int|default("0") > 0 }}'
      addons: '{{ states("sensor.addon_updates")|int|default("0") > 0 }}'
