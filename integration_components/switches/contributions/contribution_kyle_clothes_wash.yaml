---
platform: template
switches:
  contribution_kyle_clothes_wash:
    friendly_name: "Clothes: wash"
    icon_template: mdi:washing-machine
    value_template: >-
      {% set rightnow = (as_timestamp(now()))|int %}
      {% set lastdone = (states('sensor.contribution_kyle_clothes_wash'))|int %}
      {{ (rightnow - lastdone) < 86400 }}
    turn_on:
      - service: mqtt.publish
        data_template:
          entity_id: >-
            topic: homeassistant/sensor/contribution_kyle_clothes_wash/state
            payload_template: >
              {
                "timestamp": {{ (as_timestamp(now()))|int }},
                "visibility_timeout": "none",
                "visible": true,
                "unit_of_measurement": "timestamp"
              }
    turn_off:
