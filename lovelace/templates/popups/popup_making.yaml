---
card:
  type: vertical-stack
  cards:
    - type: custom:state-switch
      entity: switch.prusa
      states:
        "off":
          type: vertical-stack
          cards:
            - type: custom:decluttering-card
              template: heading
              variables:
                - heading: 3D Printer
            - type: entities
              entities:
                - entity: switch.prusa
                  name: Power On
        "on":
          type: vertical-stack
          cards:
            - type: picture-entity
              title: 3D Printer
              name: 3D Printer
              show_name: false
              show_state: false
              entities:
                - camera.prusa
              camera_view: camera.prusa
              camera_image: camera.prusa
              entity: switch.prusa
              state_filter:
                "on": brightness(75%)

            - type: entities
              entities:
                - type: custom:multiple-entity-row
                  entity: sensor.octoprint_current_state
                  name: Status
                  icon: mdi:printer-3d
                  show_state: false
                  entities:
                    - entity: sensor.octoprint_current_state
                      name: Run State
                    # - entity: binary_sensor.octoprint_printing
                    #   name: Active State
                    - entity: binary_sensor.octoprint_printing_error
                      name: Error State
                - type: custom:multiple-entity-row
                  entity: sensor.octoprint_job_percentage
                  name: Progress
                  icon: mdi:timer
                  show_state: false
                  entities:
                    - entity: sensor.octoprint_job_percentage
                      name: "Complete"
                    - entity: sensor.octoprint_time_elapsed_friendly
                      name: Elapsed
                    - entity: sensor.octoprint_time_remaining_friendly
                      name: Remaining

                # - type: section

                # - type: custom:multiple-entity-row
                #   entity: sensor.octoprint_actual_tool0_temp
                #   name: Hot End
                #   icon: mdi:printer-3d-nozzle
                #   show_state: false
                #   entities:
                #     - entity: sensor.octoprint_actual_tool0_temp
                #       name: Actual
                #     - entity: sensor.octoprint_target_tool0_temp
                #       name: Target
                # - type: custom:multiple-entity-row
                #   entity: sensor.octoprint_actual_tool0_temp
                #   name: Heated Bed
                #   icon: mdi:radiator
                #   show_state: false
                #   entities:
                #     - entity: sensor.octoprint_actual_bed_temp
                #       name: Actual
                #     - entity: sensor.octoprint_target_bed_temp
                #       name: Target
                - type: custom:multiple-entity-row
                  entity: sensor.sonoff_s31_03_power
                  name: Electricity
                  icon: mdi:power-plug
                  show_state: false
                  entities:
                    - entity: sensor.sonoff_s31_03_power
                      name: Power
                    - entity: sensor.sonoff_s31_03_current
                      name: Current
                    - entity: sensor.sonoff_s31_03_voltage
                      name: A/C
                - type: custom:multiple-entity-row
                  entity: automation.3d_print_complete
                  name: Notify When Complete
                  icon: mdi:cellphone-message
                  show_state: false
                  entities:
                    - entity: automation.3d_print_complete
                      name:
                      toggle: true

            - type: custom:love-lock-card
              title:
              popup: confirm
              cards:
                - type: entities
                  entities:
                    - entity: switch.prusa
                      name: 3D Printer Kill Switch!!!
