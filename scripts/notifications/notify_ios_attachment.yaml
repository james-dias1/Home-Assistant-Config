---
######################################################################################################
#  Call "notify_ios_attachment" like this:
#    action:
#      service: script.notify_ios_attachment
#      data_template:
#        title: 'Front Door Motion'
#        message: "Here's a photo."
#        who: "brian"
#        file: "/local/downloads/snapshot_front_doorbell.jpg"
######################################################################################################
notify_ios_attachment:
  sequence:
    - condition: state
      entity_id: input_boolean.ios_notifications
      state: 'on'
    - service_template: >
        {% if who is not string %}{% set who = 'brian' %}{% endif %}
        {% if who == 'brian' %}
          notify.brian
        {% elif who == 'family' %}
          notify.family
        {% elif who == 'kids' %}
          notify.kids
        {% elif who == 'kyle' %}
          notify.kyle
        {% elif who == 'lucas' %}
          notify.lucas
        {% elif who == 'nerene' %}
          notify.nerene
        {% elif who == 'parents' %}
          notify.parents
        {% else %}
          notify.brian
        {% endif %}
      data_template:
        title: "{{ title }}"
        message: "{{ message }} https://hass.home.brianhanifin.com{{ file }}"
        data:
          attachment:
            url: "https://hass.home.brianhanifin.com{{ file }}"