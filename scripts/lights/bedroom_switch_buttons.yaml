bedroom_switch_buttons:
  sequence:
    # - service: persistent_notification.create
    #   data_template:
    #     title: "bedroom_switch_buttons"
    #     message: "type: {{ type }}\nside: {{ side }}"

    - service_template: >
        {%- if type == "single" -%}
          light.toggle
        {%- else -%}
          switch.toggle
        {%- endif %}
      data_template:
        entity_id: >
          {# single #}
          {%- if type == "single" -%}
            {%- if side == "left" -%}
              light.nerenes_light
            {%- elif side == "right" -%}
              light.brians_light
            {%- else -%}{# both buttons #}
              light.nerenes_light, light.brians_light
            {%- endif -%}
          {# long_click_press, both, double, long_click_both, both_double #}
          {%- else -%}
            {%- if side == "left" -%}
              switch.sound_machine
            {%- elif side == "right" -%}
              switch.bedroom_fan
            {%- else -%}{# both buttons #}
              switch.bedroom_fan, switch.sound_machine
            {%- endif -%}
          {%- endif %}