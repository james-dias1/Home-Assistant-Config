---
alias: Refresh at Startup and Midnight
sequence:
  - service: script.toast
    data:
      message: Refresh at Startup and Midnight.

  # Update group.actionable_lights to replace group.all_lights.
  - service: script.create_actionable_lights_group

  # Only preform these tasks at midnight.
  - condition: time
    after: "0:00:00"
    before: "0:10:00"

  # Reset the status of Buddy's Medicine sensor.
  - service: homeassistant.update_entity
    entity_id: sensor.medicine_buddy_given_today


  # Reset family contribution switches (created as a workaround for the HassKit iOS app).
  - service: switch.turn_off
    entity_id:
      - switch.hasskit_medicine_buddy_taken
      - switch.hasskit_trash_to_curb
      - switch.hasskit_kyle_clothes_sort
      - switch.hasskit_kyle_clothes_wash
      - switch.hasskit_kyle_dishes
      - switch.hasskit_kyle_dookie
      - switch.hasskit_kyle_other
      - switch.hasskit_kyle_trash
      - switch.hasskit_lucas_clothes_sort
      - switch.hasskit_lucas_clothes_wash
      - switch.hasskit_lucas_dishes
      - switch.hasskit_lucas_dookie
      - switch.hasskit_lucas_other
      - switch.hasskit_lucas_trash

  - service: homeassistant.update_entity
    entity_id:
      - switch.hasskit_medicine_buddy_taken
      - switch.hasskit_trash_to_curb
      - switch.hasskit_kyle_clothes_sort
      - switch.hasskit_kyle_clothes_wash
      - switch.hasskit_kyle_dishes
      - switch.hasskit_kyle_dookie
      - switch.hasskit_kyle_other
      - switch.hasskit_kyle_trash
      - switch.hasskit_lucas_clothes_sort
      - switch.hasskit_lucas_clothes_wash
      - switch.hasskit_lucas_dishes
      - switch.hasskit_lucas_dookie
      - switch.hasskit_lucas_other
      - switch.hasskit_lucas_trash
