---
sequence:
  # - service: persistent_notification.create
  #   data_template:
  #     title: "zha_button_handler"
  #     message: |
  #       command: {{ command }}

  #       device: {{ device }}
  #       {%- set button = {
  #         "00:15:8d:00:01:2d:d7:c3": "printer_power_button",
  #         "00:15:8d:00:02:83:e2:b6": "bedroom_switch_button",
  #         "00:15:8d:00:02:05:bf:0f": "xiaomi_mini_switch_0fbf0502"
  #       }
  #       %}
  #       button: {{ button[device] }}


  #       value: {{ value }}
  #       {%- set button_press = {
  #         "Bool.true": "single",
  #         "2": "double"
  #       }
  #       %}
  #       button_press: {{ button_press[value] }}

  - service_template: >
      {%- set button = {
        "00:15:8d:00:01:2d:d7:c3": "printer_power_button",
        "00:15:8d:00:02:83:e2:b6": "bedroom_switch_button",
        "00:15:8d:00:02:05:bf:0f": "xiaomi_mini_switch_0fbf0502"
      }
      %}
      {# Bedroom Wall Double Switch  #}
      {%- if button[device].startswith("bedroom_switch_button") -%}
        script.bedroom_switch_buttons
      {# Printer Power Button #}
      {%- elif button[device] == "printer_power_button" -%}
        script.printer_power_button
      {%- elif button[device] == "xiaomi_mini_switch_0fbf0502" -%}
        script.test_switch_button
      {%- endif %}
    data_template:
      type: >-
        {%- set button = {
          "00:15:8d:00:01:2d:d7:c3": "printer_power_button",
          "00:15:8d:00:02:83:e2:b6": "bedroom_switch_button",
          "00:15:8d:00:02:05:bf:0f": "xiaomi_mini_switch_0fbf0502"
        }
        %}
        {{ button[device] }}
      side: >-
        {%- set button_press = {
          "Bool.true": "single",
          "2": "double"
        }
        %}
        {%- if command == "attribute_updated" %}
          {{ button_press[value] }}
        {%- else %}
          {{ command }}
        {%- endif %}
