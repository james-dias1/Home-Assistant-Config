toggle_front_door_lock:
  sequence:
    # Wait for the door to be closed before locking.
    - wait_template: "{{ is_state('binary_sensor.front_door','off') }}"
      timeout:
        minutes: 1
      continue_on_timeout: 'true'
    - service_template: >-
        {% if is_state('lock.front_door', 'locked') -%}lock.unlock
        {%- else -%}lock.lock
        {%- endif %}
      entity_id: lock.front_door
