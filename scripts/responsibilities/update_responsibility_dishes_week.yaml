---
sequence:
  service: variable.set_variable
  data:
    variable: responsibility_dishes_week
    value_template: >
      {% if "Monday" == as_timestamp(now())|timestamp_custom('%A') %}
        {% if states('sensor.contribution_kyle_dishes')|int < states('sensor.contribution_lucas_dishes')|int -%}
          Kyle
        {%- else -%}
          Lucas
        {%- endif %}
      {% else %}
        {{ states('variable.responsibility_dishes_week') }}
      {% endif %}
