homeassistant:
  customize:
    binary_sensor.glowforge_window:
      device_class: window
    #binary_sensor.xiaomi_button
    #light.xiaomi_gateway_light
    #sensor.xiaomi_gateway_illumination

################################################
## Component Settings
################################################
xiaomi_aqara:
  discovery_retry: 5
  gateways:
    - mac: !secret xiaomi_mac1
      key: !secret xiaomi_key1

################################################
## Automation
################################################
automation:
  - alias: Bathroom Switch Fan Toggle #Smart button single click
    trigger:
      platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.xiaomi_button
        click_type: single
    action:
      service: switch.toggle
      entity_id: switch.thermostat_fan_playroom

  - alias: Bathroom Switch Fan 15 minutes #Smart button long press
    trigger:
      platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.xiaomi_button
        click_type: long_click_press
    action:
      - service: switch.turn_on
        entity_id: switch.thermostat_fan_playroom
      - delay: 0:15
      - service: switch.turn_off
        entity_id: switch.thermostat_fan_playroom

  - alias: Smart button double click
    trigger:
      platform: event
      event_type: click
      event_data:
        entity_id: binary_sensor.xiaomi_button
        click_type: double
    action:
      - service: switch.turn_on
        entity_id: switch.thermostat_fan_playroom
      - delay: 1:30
      - service: switch.turn_off
        entity_id: switch.thermostat_fan_playroom