homeassistant:
  customize:
    group.home:
      order: 1
    group.alarm_clocks:
      order: 2

################################################
## Component Settings
################################################
# Enables configuration UI
config:

# Discover some devices automatically
discovery:

downloader:
  download_dir: /config/www/downloads

#########################################
## Automation
#########################################
automation:
  - alias: Home Assistant Startup Actions
    trigger:
      platform: homeassistant
      event: start
    action:
      - service: script.turn_on
        entity_id: script.mediaplayer_livingroom_showhide
      - service: script.turn_on
        entity_id: script.mediaplayer_playroom_showhide
      - service: input_text.set_value
        entity_id: input_text.dusk
        data:
          value_template: '{{ states.sun.sun.attributes.next_dusk }}'

  ## Set today's dusk time at midnight
  - alias: Set Time of Dusk
    trigger:
      platform: time
      at: "00:00"
    action:
      - service: input_text.set_value
        entity_id: input_text.dusk
        data:
          value_template: '{{ states.sun.sun.attributes.next_dusk }}'

  - alias: Notify on Home Automation Updates
    trigger:
      platform: state
      entity_id: updater.updater
    action:
      - service: script.notify_ios_engine
        data_template:
          value1: "Home Assistant Update Available"
          value2: "{{ as_timestamp(now()) | timestamp_custom('%I:%M:%S %p %d %b %Y', true) }}"
          value3: ""
          who: "brian"
      - service: persistent_notification.create
        data:
          title: "Update Available"
          message: "Home Assistant {{ states('updater.updater') }} is available. - {{ as_timestamp(now()) | timestamp_custom('%I:%M:%S %p %d%b%Y', true) }}"
          #notification_id: "update_available"