---
alias: wakeup_boys_10min_early
#initial_state: true
trigger:
  platform: template
  value_template: >
    {%- set next_alarm = states("sensor.boys_room_next_alarm") -%}
    {%- set wakeup_date = next_alarm.split("T")[0] -%}
    {%- set start_time = states("sensor.wakeup_boys_10min_early") -%}

    {%- if next_alarm != "unknown" -%}
      {{ wakeup_date == states('sensor.date') and start_time == states('sensor.time') }}
    {%- else -%}
      false
    {%- endif -%}
action:
  # - service: persistent_notification.create
  #   data_template:
  #     title: "DEBUG"
  #     message: "automation.wakeup_boys_10min_early"

  # Time to turn on the lights!
  - service: script.turn_on
    entity_id: script.wakeup_boys_light_start
