---
alias: wash_cycle_error
initial_state: true
trigger:
  - platform: state
    entity_id: binary_sensor.washer_error_state
    from: "off"
    to: "on"
action:
  - service: input_select.select_option
    data:
      entity_id: input_select.washing_machine_status
      option: Error

  - service: script.notify_speech
    data_template:
      media_player: media_player.google_downstairs
      message: "Error. The washing machine has an error. ... {{ state_attr('sensor.washer','error_message') }}"

  - service: script.notify_mobile
    data_template:
      title: "ERROR: Washing Machine"
      message: "{{ state_attr('sensor.washer','error_message') }}"
      who: brian
