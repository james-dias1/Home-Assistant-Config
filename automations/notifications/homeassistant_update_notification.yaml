---
# Sends alerts when a new release is available.
#
alias: homeassistant_update_notification
initial_state: on
trigger:
  platform: state
  entity_id: sensor.version_available
condition:
  - condition: template
    value_template: >-
      {{
        states('sensor.lastest_version')
        !=
        states('sensor.current_version')
      }}
action:
  - service: script.notify_web
    data_template:
      title: "New Home Assistant Available"
      message: "Version {{ sensor.lastest_version }} is available!"
      id: "update"

  - service: script.notify_mobile
    data_template:
      title: "Home Assistant Update"
      message: "Version {{ sensor.lastest_version }} is available!"
      who: "brian"
