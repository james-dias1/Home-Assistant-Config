---
# Check these at midnight
#
alias: update_at_0000
initial_state: true
trigger:
  platform: time
  at: "0:00:01"
action:
  # Save power by turning off the vanity lighting at midnight.
  - service: switch.turn_off
    entity_id:
      - switch.xmas_tree
      - switch.landscape_lights

  # Disable guest mode (in case it was enabled in the evening).
  - service: input_boolean.turn_off
    entity_id: input_boolean.guest_mode

  - service: script.refresh_at_startup_and_midnight

  # Update the holiday sensors.
  - delay:
      minutes: 1
  - service: script.holiday_sensors_update
