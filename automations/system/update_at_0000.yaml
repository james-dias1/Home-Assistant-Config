---
# Check these at midnight
#
alias: update_at_0000
initial_state: true
trigger:
  platform: time
  at: "0:00:01"
action:
  - service: persistent_notification.create
    data:
      title: "update_at_0000"
      message: "Start - {{ as_timestamp(now()) | timestamp_custom('%I:%M:%S %p %d%b%Y', true) }}"


  # Create group.actionable_lights to replace group.all_lights.
  - service: script.create_actionable_lights_group

  # Update upcoming dynamic holidays.
  - service: script.update_date_easter
  - service: script.update_date_fathers
  - service: script.update_date_labor
  - service: script.update_date_memorial
  - service: script.update_date_mlk
  - service: script.update_date_mothers
  - service: script.update_date_presidents
  - service: script.update_date_thanksgiving

  # Update the holiday sensors.
  - delay:
      minutes: 5
  - service: script.holiday_sensors_update


  - service: persistent_notification.create
    data:
      title: "update_at_0000"
      message: "End - {{ as_timestamp(now()) | timestamp_custom('%I:%M:%S %p %d%b%Y', true) }}"
