---
alias: watchdog_garage_door_opened
initial_state: True
trigger:
  - platform: state
    entity_id: cover.garage_door
    #from: 'closed'
    to: 'opening'
action:
  - service: light.turn_on
    data:
      entity_id: light.garage_entry
      brightness_pct: 75
      effect: "colorloop"
      flash: "long"
  - service: light.turn_on
    data:
      entity_id: light.family_room_table_lamp
      brightness_pct: 100
      effect: "colorloop"
      flash: "long"

  # If after 5 minutes the garage is still open, dim the light.
  - delay: "0:05:00"
  - condition: state
    entity_id: cover.garage_door
    state:     'open'
  - service: light.turn_on
    data:
      entity_id: light.garage_entry
      brightness_pct: 20
      transition: 5
  - service: light.turn_on
    data:
      entity_id: light.family_room_table_lamp
      brightness_pct: 20
      transition: 5